<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Modelo UML</title><link rel="stylesheet" href="xmi.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.67.2"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="id253883"></a>Modelo UML</h2></div><div><h2 class="title"><a name="id253883"></a>Modelo UML</h2></div><div><h2 class="title"><a name="id253883"></a>Modelo UML</h2></div><div><h2 class="title"><a name="id253883"></a>Modelo UML</h2></div><div><h2 class="title"><a name="id253883"></a>Modelo UML</h2></div><div><h2 class="title"><a name="id253883"></a>Modelo UML</h2></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#actors">Actors</a></span></dt><dt><span class="section"><a href="#usecases">Use Cases</a></span></dt><dt><span class="section"><a href="#interfaces">Interfaces</a></span></dt><dt><span class="section"><a href="#classes">Classes</a></span></dt><dd><dl><dt><span class="section"><a href="#id317369">task</a></span></dt><dt><span class="section"><a href="#id325149">map</a></span></dt><dt><span class="section"><a href="#id325242">runqueue</a></span></dt><dt><span class="section"><a href="#id325832">prio_array</a></span></dt><dt><span class="section"><a href="#id326228">tuple</a></span></dt><dt><span class="section"><a href="#id326321">cpu</a></span></dt><dt><span class="section"><a href="#id326870">scheduler</a></span></dt><dt><span class="section"><a href="#id327477">list</a></span></dt><dt><span class="section"><a href="#id327570">nueva_clase</a></span></dt></dl></dd><dt><span class="section"><a href="#diagrams">Diagrams</a></span></dt><dd><dl><dt><span class="section"><a href="#id327681">diagrama de clase</a></span></dt><dt><span class="section"><a href="#id327707">Classes:</a></span></dt></dl></dd></dl></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="actors"></a>Actors</h2></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="usecases"></a>Use Cases</h2></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="interfaces"></a>Interfaces</h2></div></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="classes"></a>Classes</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id317369"></a>task</h3></div></div></div><div class="table"><a name="id317376"></a><p class="title"><b>Table 1. </b></p><table summary="" border="1"><colgroup><col align="left"><col align="left"><col align="left"></colgroup><thead><tr><th class="class-title" align="left">Class</th><th class="class-name" colspan="2" align="left">task</th></tr></thead><tbody><tr><td class="info-title" colspan="3" align="left">Attributes:</td></tr><tr><td class="feature-heading" align="left">visibility</td><td class="feature-heading" align="left">type</td><td class="feature-heading" align="left">name</td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">timeline</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">name</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">localtime</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">flags</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">state</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">prio</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left">runqueue</td><td class="feature-detail" align="left">run_list</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left">prio_array</td><td class="feature-detail" align="left">array</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">sleep_avg</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">timestamp</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">last_ran</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">activated</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">policy</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">timeslice</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">first_time_slice</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">rt_priority</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="info-title" colspan="3" align="left">
                <p>Operations:</p>
              </td></tr><tr><td class="feature-heading" align="left">
                <p>visibility</p>
              </td><td class="feature-heading" align="left">
                <p>return</p>
              </td><td class="feature-heading" align="left">
                <p>name</p>
              </td></tr><tr><td class="feature-detail" align="left">public</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">activate</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">public</td><td class="feature-detail" align="left">
                <p class="datatype">void</p>
              </td><td class="feature-detail" align="left">recalc_prio</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id325149"></a>map</h3></div></div></div><div class="table"><a name="id325156"></a><p class="title"><b>Table 2. </b></p><table summary="" border="1"><colgroup><col align="left"><col align="left"><col align="left"></colgroup><thead><tr><th class="class-title" align="left">Class</th><th class="class-name" colspan="2" align="left">map</th></tr></thead><tbody><tr><td colspan="3" align="left">
                <p></p>
              </td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id325242"></a>runqueue</h3></div></div></div><div class="table"><a name="id325248"></a><p class="title"><b>Table 3. </b></p><table summary="" border="1"><colgroup><col align="left"><col align="left"><col align="left"></colgroup><thead><tr><th class="class-title" align="left">Class</th><th class="class-name" colspan="2" align="left">runqueue</th></tr></thead><tbody><tr><td class="info-title" colspan="3" align="left">Attributes:</td></tr><tr><td class="feature-heading" align="left">visibility</td><td class="feature-heading" align="left">type</td><td class="feature-heading" align="left">name</td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left">cpu</td><td class="feature-detail" align="left">cpu</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">CPU a la que corresponde la runqueue</td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left">prio_array</td><td class="feature-detail" align="left">active</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">priority_array de procesos activos</td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left">prio_array</td><td class="feature-detail" align="left">expired</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">priority_array de procesos expirados</td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">nr_running</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">Número de procesos de la runqueue en ejecución (len(active))</td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">nr_switches</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">Número de cambios de contexto.</td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">expired_timestamp</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">timestamp_last_tick</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left">task</td><td class="feature-detail" align="left">current</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left">task</td><td class="feature-detail" align="left">idle</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">best_expired_prio</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">nr_iowait</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id325832"></a>prio_array</h3></div></div></div><div class="table"><a name="id325839"></a><p class="title"><b>Table 4. </b></p><table summary="" border="1"><colgroup><col align="left"><col align="left"><col align="left"></colgroup><thead><tr><th class="class-title" align="left">Class</th><th class="class-name" colspan="2" align="left">prio_array</th></tr></thead><tbody><tr><td class="info-title" colspan="3" align="left">Attributes:</td></tr><tr><td class="feature-heading" align="left">visibility</td><td class="feature-heading" align="left">type</td><td class="feature-heading" align="left">name</td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">nr_active</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">bitmap</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">queue</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="info-title" colspan="3" align="left">
                <p>Operations:</p>
              </td></tr><tr><td class="feature-heading" align="left">
                <p>visibility</p>
              </td><td class="feature-heading" align="left">
                <p>return</p>
              </td><td class="feature-heading" align="left">
                <p>name</p>
              </td></tr><tr><td class="feature-detail" align="left">public</td><td class="feature-detail" align="left">
                <p class="datatype">void</p>
              </td><td class="feature-detail" align="left">add_task</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">public</td><td class="feature-detail" align="left">
                <p class="datatype">void</p>
              </td><td class="feature-detail" align="left">remove_task</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id326228"></a>tuple</h3></div></div></div><div class="table"><a name="id326235"></a><p class="title"><b>Table 5. </b></p><table summary="" border="1"><colgroup><col align="left"><col align="left"><col align="left"></colgroup><thead><tr><th class="class-title" align="left">Class</th><th class="class-name" colspan="2" align="left">tuple</th></tr></thead><tbody><tr><td colspan="3" align="left">
                <p></p>
              </td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id326321"></a>cpu</h3></div></div></div><div class="table"><a name="id326327"></a><p class="title"><b>Table 6. </b></p><table summary="" border="1"><colgroup><col align="left"><col align="left"><col align="left"></colgroup><thead><tr><th class="class-title" align="left">Class</th><th class="class-name" colspan="2" align="left">cpu</th></tr></thead><tbody><tr><td class="info-title" colspan="3" align="left">Attributes:</td></tr><tr><td class="feature-heading" align="left">visibility</td><td class="feature-heading" align="left">type</td><td class="feature-heading" align="left">name</td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">id</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">Identificación de la CPU</td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">clock</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">Lleva la cuenta de los ticks del reloj. Equivale a los jiffies y consultarlo es lo mismo que consultar el TSC en el kernel. Este atributo hace las veces de sched_clock</td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left">runqueue</td><td class="feature-detail" align="left">rq</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">La runqueue de la CPU</td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left">task</td><td class="feature-detail" align="left">idle</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">Tarea inactiva. Hay que definirla explícitamente en la CPU, por ejemplo, tiempo infinito en IOWAIT</td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">running</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">Indica si la CPU está en funcionamiento. Si no lo está, no se permite avanzar ticks, por lo que el comportamiento del emulador sería estático.</td></tr><tr><td class="info-title" colspan="3" align="left">
                <p>Operations:</p>
              </td></tr><tr><td class="feature-heading" align="left">
                <p>visibility</p>
              </td><td class="feature-heading" align="left">
                <p>return</p>
              </td><td class="feature-heading" align="left">
                <p>name</p>
              </td></tr><tr><td class="feature-detail" align="left">public</td><td class="feature-detail" align="left">
                <p class="datatype">void</p>
              </td><td class="feature-detail" align="left">start</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">Inicializa algunos valores de la CPU como clock=0, rq=*rq y la tarea idle.</td></tr><tr><td class="feature-detail" align="left">public</td><td class="feature-detail" align="left">
                <p class="datatype">void</p>
              </td><td class="feature-detail" align="left">stop</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">Detiene la CPU</td></tr><tr><td class="feature-detail" align="left">public</td><td class="feature-detail" align="left">
                <p class="datatype">void</p>
              </td><td class="feature-detail" align="left">advance_tick</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">Incrementa el reloj si la CPU está activa (self.running==True)</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id326870"></a>scheduler</h3></div></div></div><div class="table"><a name="id326876"></a><p class="title"><b>Table 7. </b></p><table summary="" border="1"><colgroup><col align="left"><col align="left"><col align="left"></colgroup><thead><tr><th class="class-title" align="left">Class</th><th class="class-name" colspan="2" align="left">scheduler</th></tr></thead><tbody><tr><td class="info-title" colspan="3" align="left">Attributes:</td></tr><tr><td class="feature-heading" align="left">visibility</td><td class="feature-heading" align="left">type</td><td class="feature-heading" align="left">name</td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left">cpu</td><td class="feature-detail" align="left">cpus[]</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">Lista de CPU's del sistema. En el nuestro nos limitamos a un sistema UP, pero mantenemos abierta la puerta al SMP.</td></tr><tr><td class="feature-detail" align="left">private</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">processes</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">Lista con todos los procesos del sistema. Algunos estarán en una runqueue y otros en una waitqueue.</td></tr><tr><td class="info-title" colspan="3" align="left">
                <p>Operations:</p>
              </td></tr><tr><td class="feature-heading" align="left">
                <p>visibility</p>
              </td><td class="feature-heading" align="left">
                <p>return</p>
              </td><td class="feature-heading" align="left">
                <p>name</p>
              </td></tr><tr><td class="feature-detail" align="left">public</td><td class="feature-detail" align="left">scheduler</td><td class="feature-detail" align="left">__init__</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left"> </td></tr><tr><td class="feature-detail" align="left">public</td><td class="feature-detail" align="left"> </td><td class="feature-detail" align="left">add_dir_tasks</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">Añade las tareas de un directorio. Añade todos los archivos con extensión .tsk</td></tr><tr><td class="feature-detail" align="left">public</td><td class="feature-detail" align="left">
                <p class="datatype">void</p>
              </td><td class="feature-detail" align="left">do_fork</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">Inicializa los valores de una tarea como si la llamada do_fork del kernel fuera</td></tr><tr><td class="feature-detail" align="left">public</td><td class="feature-detail" align="left">
                <p class="datatype">void</p>
              </td><td class="feature-detail" align="left">run</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">Inicia el temporizador del planificador.</td></tr><tr><td class="feature-detail" align="left">public</td><td class="feature-detail" align="left">
                <p class="datatype">void</p>
              </td><td class="feature-detail" align="left">do_tick</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">Función llamada por el timer. Se encarga de ejecutar check_tasks() y scheduler_tick</td></tr><tr><td class="feature-detail" align="left">public</td><td class="feature-detail" align="left">
                <p class="datatype">void</p>
              </td><td class="feature-detail" align="left">scheduler_tick</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">Análogo a la función del mismo nombre del kernel</td></tr><tr><td class="feature-detail" align="left">public</td><td class="feature-detail" align="left">
                <p class="datatype">void</p>
              </td><td class="feature-detail" align="left">check_tasks</td></tr><tr><td class="comment" align="left"> </td><td class="comment" colspan="2" align="left">Comprueba y modifica el estado de la tarea actual en función de su linea temporal.</td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id327477"></a>list</h3></div></div></div><div class="table"><a name="id327484"></a><p class="title"><b>Table 8. </b></p><table summary="" border="1"><colgroup><col align="left"><col align="left"><col align="left"></colgroup><thead><tr><th class="class-title" align="left">Class</th><th class="class-name" colspan="2" align="left">list</th></tr></thead><tbody><tr><td colspan="3" align="left">
                <p></p>
              </td></tr></tbody></table></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id327570"></a>nueva_clase</h3></div></div></div><div class="table"><a name="id327576"></a><p class="title"><b>Table 9. </b></p><table summary="" border="1"><colgroup><col align="left"><col align="left"><col align="left"></colgroup><thead><tr><th class="class-title" align="left">Class</th><th class="class-name" colspan="2" align="left">nueva_clase</th></tr></thead><tbody><tr><td colspan="3" align="left">
                <p></p>
              </td></tr></tbody></table></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="diagrams"></a>Diagrams</h2></div></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id327681"></a>diagrama de clase</h3></div></div></div><p></p><div class="mediaobject"><img src="diagrama%20de%20clase.png"></div></div><div class="section" lang="en"><div class="titlepage"><div><div><h3 class="title"><a name="id327707"></a>Classes:</h3></div></div></div><p></p></div></div></div></body></html>
