#summary Estructuras de datos a emular
#labels Phase-Design,Estructuras,Datos

= Introducción =

Estructuras de datos que serán emuladas. Pueden coincidir total o parcialmente con las que aparecen en [EstructurasDeDatos]

= Estructuras =

== Proceso ==
Contiene los campos de la estructura _task_struct_ utilizados por el planificador. Muchos de sus campos se expondrán en el emulador.

Campos:
 * *flags*: Contiene un _flag_ que indica si el planificador debe ser invocado.
 * *state*: Estado del proceso (TASK_RUNNING, TASK_UNINTERRUPTIBLE...)
 * *prio*: Prioridad dinámica.
 * *run_list*: Enlaza con el siguiente y anterior proceso de la _rq_ a la que pertenece.
 * *array *: Apunta al _prio_array_ al que pertenece el proceso.
 * *sleep_avg*: Tiempo medio durmiendo.
 * *timestamp*: Marca de tiempo del momento de inserción del proceso en la _rq_, o tiempo del último cambio de proceso que incluyó al proceso.
 * *last_ran*: Tiempo del último cambio de proceso que reemplazó al proceso.
 * *activated*: Marca cuando el proceso es "levantado".
 * *policy*: Tipo de planificación del proceso (_SCHED_NORMAL, SCHED_RR o SCHED_FIFO_).
 * *time_slice* : Ticks que le quedan al proceso de su quanto.
 * *first_time_slice*: Vale 1 si el proceso nunca ha agotado su quanto de tiempo.
 * *rt_priority*: Prioridad de tiempo real del proceso.

== prio_array ==

Tal como está redactada en [EstructurasDeDatos].

Miembros de la estructura:

 * *nr_active*: Número de procesos activos.
 * *bitmap{{{[BITMAP_SIZE]}}}*: Mapa de bits indicando para qué prioridades hay procesos en la lista.
 * *queue{{{[MAX_PRIO]}}}*: Array de listas.

== _runqueue_ ==

Tal como está redactada en [EstructurasDeDatos].

Miembros de la estructura:

 * *lock*: Bloqueo para que solo un proceso pueda modificar la _rq_ en un momento dado.
 * *nr_running*: Número de procesos ejecutables en la cola.
 * *cpu_load*: Carga de la CPU.
 * *nr_switches*: Número de cambios de contexto. Solo se usa a efectos estadísticos.
 * *expired_timestamp*: tiempo transcurrido desde el último intercambio de los _prio_array_ active <->expired.
 * *nr_uninterruptible*: Tareas en estado TASK_UNINTERRUPTIBLE.
 * *timestamp_last_tick*: Tiempo del último _scheduler tick_. Se usa para saber si una tarea debería considerarse _cache hot_ (con posibilidades de tener aún datos en la caché de la CPU).
 * *curr*: Puntero al proceso actual _current_.
 * *idle*: Puntero a la tarea que se ejecuta cuando no hay nada que ejecutar.
 * *active*: Puntero a _prio_array_  de tareas activas (con tiempo en sus _timeslices_).
 * *expired*: Puntero a _prio_array_ de tareas que han agotado sus ranuras de tiempo de ejecución.
 * *arrays{{{[2]}}}*: El array real de _prio_array_.
 * *best_expired_prio*: La mayor prioridad de las tareas expiradas.
 * *nr_iowait*: Tareas esperando un evento de I/O.